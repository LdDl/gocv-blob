package blob

import (
	"image"
	"testing"
)

func TestArrayTracker(t *testing.T) {
	maxPointsInTrack := 150
	classID := 1
	className := "just_an_object"
	allblobies := NewBlobiesDefaults()

	rectHalfHeight := 30
	rectHalfWidth := 75
	for i := range objectOne {
		centerOne := objectOne[i]
		centerTwo := objectTwo[i]
		centerThree := objectThree[i]

		rectOne := image.Rect(centerOne[0]-rectHalfWidth, centerOne[1]-rectHalfHeight, centerOne[0]+rectHalfWidth, centerOne[1]+rectHalfHeight)
		rectTwo := image.Rect(centerTwo[0]-rectHalfWidth, centerTwo[1]-rectHalfHeight, centerTwo[0]+rectHalfWidth, centerTwo[1]+rectHalfHeight)
		rectThree := image.Rect(centerThree[0]-rectHalfWidth, centerThree[1]-rectHalfHeight, centerThree[0]+rectHalfWidth, centerThree[1]+rectHalfHeight)

		blobOne := NewBlobie(rectOne, maxPointsInTrack, classID, className)
		blobTwo := NewBlobie(rectTwo, maxPointsInTrack, classID, className)
		blobThree := NewBlobie(rectThree, maxPointsInTrack, classID, className)

		currentFrameBlobies := []*Blobie{blobOne, blobTwo, blobThree}
		allblobies.MatchToExisting(currentFrameBlobies)

		t.Logf("Number of blobs on frame %d is %d", i, len(allblobies.Objects))
	}
}

var (
	objectOne = [][]int{
		[]int{311, 5},
		[]int{312, 6},
		[]int{313, 8},
		[]int{311, 10},
		[]int{311, 11},
		[]int{312, 12},
		[]int{312, 12},
		[]int{313, 13},
		[]int{312, 16},
		[]int{312, 16},
		[]int{312, 18},
		[]int{312, 18},
		[]int{312, 19},
		[]int{312, 19},
		[]int{312, 20},
		[]int{312, 20},
		[]int{312, 22},
		[]int{312, 22},
		[]int{311, 23},
		[]int{311, 23},
		[]int{311, 24},
		[]int{311, 24},
		[]int{311, 28},
		[]int{310, 30},
		[]int{311, 32},
		[]int{311, 35},
		[]int{311, 39},
		[]int{310, 42},
		[]int{310, 44},
		[]int{308, 46},
		[]int{307, 56},
		[]int{308, 58},
		[]int{308, 70},
		[]int{308, 60},
		[]int{307, 52},
		[]int{307, 64},
		[]int{307, 51},
		[]int{308, 70},
		[]int{307, 70},
		[]int{307, 70},
		[]int{307, 66},
		[]int{307, 83},
		[]int{307, 80},
		[]int{308, 85},
		[]int{307, 80},
		[]int{309, 98},
		[]int{306, 79},
		[]int{307, 98},
		[]int{306, 61},
		[]int{307, 94},
		[]int{308, 101},
		[]int{306, 94},
		[]int{306, 104},
		[]int{306, 94},
		[]int{305, 107},
		[]int{307, 112},
		[]int{307, 108},
		[]int{307, 108},
		[]int{306, 109},
		[]int{306, 109},
		[]int{306, 121},
		[]int{307, 108},
		[]int{307, 108},
		[]int{308, 120},
		[]int{307, 122},
		[]int{307, 122},
		[]int{308, 128},
		[]int{307, 130},
		[]int{306, 122},
		[]int{308, 140},
		[]int{309, 122},
		[]int{309, 122},
		[]int{309, 140},
		[]int{309, 122},
		[]int{308, 134},
		[]int{309, 141},
		[]int{309, 136},
		[]int{309, 136},
		[]int{308, 154},
		[]int{311, 155},
		[]int{311, 155},
		[]int{307, 150},
		[]int{311, 161},
		[]int{307, 162},
		[]int{313, 169},
		[]int{311, 171},
		[]int{307, 181},
		[]int{311, 175},
		[]int{311, 175},
		[]int{306, 163},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
		[]int{312, 178},
	}

	objectTwo = [][]int{
		[]int{311 + 50, 5},
		[]int{312 + 50, 6},
		[]int{313 + 50, 8},
		[]int{311 + 50, 10},
		[]int{311 + 50, 11},
		[]int{312 + 50, 12},
		[]int{312 + 50, 12},
		[]int{313 + 50, 13},
		[]int{312 + 50, 16},
		[]int{312 + 50, 16},
		[]int{312 + 50, 18},
		[]int{312 + 50, 18},
		[]int{312 + 50, 19},
		[]int{312 + 50, 19},
		[]int{312 + 50, 20},
		[]int{312 + 50, 20},
		[]int{312 + 50, 22},
		[]int{312 + 50, 22},
		[]int{311 + 50, 23},
		[]int{311 + 50, 23},
		[]int{311 + 50, 24},
		[]int{311 + 50, 24},
		[]int{311 + 50, 28},
		[]int{310 + 50, 30},
		[]int{311 + 50, 32},
		[]int{311 + 50, 35},
		[]int{311 + 50, 39},
		[]int{310 + 50, 42},
		[]int{310 + 50, 44},
		[]int{308 + 50, 46},
		[]int{307 + 50, 56},
		[]int{308 + 50, 58},
		[]int{308 + 50, 70},
		[]int{308 + 50, 60},
		[]int{307 + 50, 52},
		[]int{307 + 50, 64},
		[]int{307 + 50, 51},
		[]int{308 + 50, 70},
		[]int{307 + 50, 70},
		[]int{307 + 50, 70},
		[]int{307 + 50, 66},
		[]int{307 + 50, 83},
		[]int{307 + 50, 80},
		[]int{308 + 50, 85},
		[]int{307 + 50, 80},
		[]int{309 + 50, 98},
		[]int{306 + 50, 79},
		[]int{307 + 50, 98},
		[]int{306 + 50, 61},
		[]int{307 + 50, 94},
		[]int{308 + 50, 101},
		[]int{306 + 50, 94},
		[]int{306 + 50, 104},
		[]int{306 + 50, 94},
		[]int{305 + 50, 107},
		[]int{307 + 50, 112},
		[]int{307 + 50, 108},
		[]int{307 + 50, 108},
		[]int{306 + 50, 109},
		[]int{306 + 50, 109},
		[]int{306 + 50, 121},
		[]int{307 + 50, 108},
		[]int{307 + 50, 108},
		[]int{308 + 50, 120},
		[]int{307 + 50, 122},
		[]int{307 + 50, 122},
		[]int{308 + 50, 128},
		[]int{307 + 50, 130},
		[]int{306 + 50, 122},
		[]int{308 + 50, 140},
		[]int{309 + 50, 122},
		[]int{309 + 50, 122},
		[]int{309 + 50, 140},
		[]int{309 + 50, 122},
		[]int{308 + 50, 134},
		[]int{309 + 50, 141},
		[]int{309 + 50, 136},
		[]int{309 + 50, 136},
		[]int{308 + 50, 154},
		[]int{311 + 50, 155},
		[]int{311 + 50, 155},
		[]int{307 + 50, 150},
		[]int{311 + 50, 161},
		[]int{307 + 50, 162},
		[]int{313 + 50, 169},
		[]int{311 + 50, 171},
		[]int{307 + 50, 181},
		[]int{311 + 50, 175},
		[]int{311 + 50, 175},
		[]int{306 + 50, 163},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
		[]int{312 + 50, 178},
	}

	objectThree = [][]int{
		[]int{311 - 50, 5},
		[]int{312 - 50, 6},
		[]int{313 - 50, 8},
		[]int{311 - 50, 10},
		[]int{311 - 50, 11},
		[]int{312 - 50, 12},
		[]int{312 - 50, 12},
		[]int{313 - 50, 13},
		[]int{312 - 50, 16},
		[]int{312 - 50, 16},
		[]int{312 - 50, 18},
		[]int{312 - 50, 18},
		[]int{312 - 50, 19},
		[]int{312 - 50, 19},
		[]int{312 - 50, 20},
		[]int{312 - 50, 20},
		[]int{312 - 50, 22},
		[]int{312 - 50, 22},
		[]int{311 - 50, 23},
		[]int{311 - 50, 23},
		[]int{311 - 50, 24},
		[]int{311 - 50, 24},
		[]int{311 - 50, 28},
		[]int{310 - 50, 30},
		[]int{311 - 50, 32},
		[]int{311 - 50, 35},
		[]int{311 - 50, 39},
		[]int{310 - 50, 42},
		[]int{310 - 50, 44},
		[]int{308 - 50, 46},
		[]int{307 - 50, 56},
		[]int{308 - 50, 58},
		[]int{308 - 50, 70},
		[]int{308 - 50, 60},
		[]int{307 - 50, 52},
		[]int{307 - 50, 64},
		[]int{307 - 50, 51},
		[]int{308 - 50, 70},
		[]int{307 - 50, 70},
		[]int{307 - 50, 70},
		[]int{307 - 50, 66},
		[]int{307 - 50, 83},
		[]int{307 - 50, 80},
		[]int{308 - 50, 85},
		[]int{307 - 50, 80},
		[]int{309 - 50, 98},
		[]int{306 - 50, 79},
		[]int{307 - 50, 98},
		[]int{306 - 50, 61},
		[]int{307 - 50, 94},
		[]int{308 - 50, 101},
		[]int{306 - 50, 94},
		[]int{306 - 50, 104},
		[]int{306 - 50, 94},
		[]int{305 - 50, 107},
		[]int{307 - 50, 112},
		[]int{307 - 50, 108},
		[]int{307 - 50, 108},
		[]int{306 - 50, 109},
		[]int{306 - 50, 109},
		[]int{306 - 50, 121},
		[]int{307 - 50, 108},
		[]int{307 - 50, 108},
		[]int{308 - 50, 120},
		[]int{307 - 50, 122},
		[]int{307 - 50, 122},
		[]int{308 - 50, 128},
		[]int{307 - 50, 130},
		[]int{306 - 50, 122},
		[]int{308 - 50, 140},
		[]int{309 - 50, 122},
		[]int{309 - 50, 122},
		[]int{309 - 50, 140},
		[]int{309 - 50, 122},
		[]int{308 - 50, 134},
		[]int{309 - 50, 141},
		[]int{309 - 50, 136},
		[]int{309 - 50, 136},
		[]int{308 - 50, 154},
		[]int{311 - 50, 155},
		[]int{311 - 50, 155},
		[]int{307 - 50, 150},
		[]int{311 - 50, 161},
		[]int{307 - 50, 162},
		[]int{313 - 50, 169},
		[]int{311 - 50, 171},
		[]int{307 - 50, 181},
		[]int{311 - 50, 175},
		[]int{311 - 50, 175},
		[]int{306 - 50, 163},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
		[]int{312 - 50, 178},
	}
)
